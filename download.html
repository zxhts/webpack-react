<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>下载引导</title>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-touch-fullscreen" content="yes" />
	<meta name="format-detection" content="telephone=no,address=no" />
	<meta name="apple-mobile-web-app-status-bar-style" content="white" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width, viewport-fit=cover" />
	<meta name="keywords" content="提示引导，下载提示，下载遮罩，步骤引导，微信下载，下载引导,下载" />
	<meta name="description" content="该项目是针对微信默认浏览器不能下载安装包的问题而开发的引导提示插件，原生js支持，不需要引入第三方框架，可快速开发。" />
	<style>
		.btn {
			width: 148px;
			height: 45px;
			line-height: 45px;
			border-radius: 44px;
			outline: none;
			border: none;
			font-size: 17px;
			font-weight: 500;
			color: rgba(255, 255, 255, 1);
			text-align: center;
			margin: 60px auto;
			background: rgba(216, 14, 18, 1);
			cursor: pointer;
		}
	</style>
	<!-- <script type="text/javascript" src="./downloadFile.js"></script> -->
	<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script> 
</head>

<body>
	<div class="content">download1.html
		<div class="btn" id="download">立即下载</div>
		<br>
		<a href="http://10.1.147.59:8100/ticket.pdf">跳转测试</a>
	</div>
	<script>

		// document.getElementById('download').onclick = async function () {
		// 	const path = "http://10.1.148.149:8100/test.xlsx";
		// 	const name = "test.xlsx";
		// 	const xhr = new XMLHttpRequest();
		// 	xhr.open('get', path);
		// 	xhr.responseType = 'blob';
		// 	xhr.send();
		// 	xhr.onload = function () {
		// 		if (this.status === 200 || this.status === 304) {
		// 			// 如果是IE10及以上，不支持download属性，采用msSaveOrOpenBlob方法，但是IE10以下也不支持msSaveOrOpenBlob
		// 			// if ('msSaveOrOpenBlob' in navigator) {
		// 			// 	navigator.msSaveOrOpenBlob(this.response, name);
		// 			// 	return;
		// 			// }
		// 			// const blob = new Blob([this.response], { type: xhr.getResponseHeader('Content-Type') });
		// 			// const url = URL.createObjectURL(blob);
		// 			const url = URL.createObjectURL(this.response);
		// 			const a = document.createElement('a');
		// 			a.style.display = 'none';
		// 			a.href = url;
		// 			a.download = name;
		// 			document.body.appendChild(a);
		// 			// a.click();
		// 			// document.body.removeChild(a);
		// 			// URL.revokeObjectURL(url);
		// 		}
		// 	};
		// }

		// document.getElementById('download').onclick = async function () {
		// 	const path = "http://10.1.148.149:8100/test.xlsx";
		// 	const name = "test.xlsx";
		// 	const xhr = new XMLHttpRequest();
		// 	xhr.open('get', path);
		// 	xhr.responseType = 'blob';
		// 	xhr.send();
		// 	xhr.onload = function () {
		// 		if (this.status === 200 || this.status === 304) {
		// 			const fileReader = new FileReader();
		// 			fileReader.readAsDataURL(this.response);
		// 			fileReader.onload = function () {
		// 				const a = document.createElement('a');
		// 				a.style.display = 'none';
		// 				a.href = this.result;
		// 				a.download = name;
		// 				document.body.appendChild(a);
		// 				a.click();
		// 				document.body.removeChild(a);
		// 			};
		// 		}
		// 	}
		// }

		document.getElementById('download').onclick = function(){
          let url = "http://10.1.148.149:8100/test.xlsx";
          let iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.src = url;
		//   iframe.src = "javascript: '<script>location.href=\"" + url + "\"<\/script>'";
          document.getElementsByTagName('body')[0].appendChild(iframe);
      	}
		

	</script>
</body>

</html>